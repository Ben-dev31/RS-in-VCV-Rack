<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Module VCV Rack : R√©sonance Stochastique</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: #f8f9fa;
      color: #222;
      margin: 0;
      padding: 0 0 3em 0;
      line-height: 1.7;
    }
    .container {
      max-width: 70%;
      margin: 2em auto;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 12px #0001;
      padding: 2em 2.5em;
    }
    h1, h2, h3, h4 {
      color: #2a3a5a;
      margin-top: 1.5em;
      margin-bottom: 0.5em;
    }
    h1 { font-size: 2.2em; }
    h2 { font-size: 1.5em; border-bottom: 1px solid #e0e0e0; padding-bottom: 0.2em;}
    h3 { font-size: 1.2em; }
    hr { border: none; border-top: 1px solid #e0e0e0; margin: 2em 0; }
    ul, ol { margin: 0 0 1em 2em; }
    code, pre {
      background: #f3f3f3;
      color: #c7254e;
      border-radius: 4px;
      font-family: 'Fira Mono', 'Consolas', monospace;
      font-size: 0.98em;
      padding: 0.1em 0.3em;
    }
    pre {
      padding: 1em;
      overflow-x: auto;
      margin: 1em 0;
      background: #f6f8fa;
      color: #222;
      border-left: 4px solid #2a3a5a33;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      margin: 1em 0;
      background: #fafbfc;
    }
    th, td {
      border: 1px solid #e0e0e0;
      padding: 0.5em 0.8em;
      text-align: left;
    }
    th {
      background: #f0f4f8;
      color: #2a3a5a;
    }
    img {
      max-width: 100%;
      border-radius: 6px;
      margin: 1em 0;
      box-shadow: 0 1px 6px #0002;
    }
    .images-container {
      display: flex;
      flex-wrap: wrap;
      gap: 1.5em;
      justify-content: flex-start;
      align-items: flex-start;
    }
    .images-container p {
      margin: 0;
      flex: 1 1 200px;
      text-align: center;
    }
    a {
      color: #0077cc;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    .note {
      background: #e7f5ff;
      border-left: 4px solid #339af0;
      padding: 0.7em 1em;
      margin: 1em 0;
      border-radius: 4px;
      color: #1c3d5a;
    }
    .emoji {
      font-size: 1.2em;
      margin-right: 0.3em;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Module VCV Rack : R√©sonance Stochastique</h1>

    <h2><span class="emoji">üéØ</span> Objectif</h2>
    <p>
      Ce module simule un syst√®me multi-puits inspir√© du ph√©nom√®ne de <strong>r√©sonance stochastique</strong>, pour cr√©er des <strong>notes musicales al√©atoires mais contr√¥l√©es</strong>. Chaque changement de puits d√©clenche une note diff√©rente, envoy√©e en tension via une sortie 1V/oct pour piloter un oscillateur (VCO).
    </p>
    <hr>

    <h2><span class="emoji">‚öôÔ∏è</span> Fonctionnalit√©s</h2>
    <ul>
      <li><strong>D√©tection des changements d‚Äô√©tat</strong> dans un potentiel bistable ou multi-puits.</li>
      <li><strong>Association d'une note musicale</strong> √† chaque puits d√©tect√©.</li>
      <li><strong>Sortie de tension 1V/octave</strong> compatible avec les standards VCV Rack.</li>
      <li><strong>Contr√¥le du rythme</strong> des notes (dur√©e minimale entre deux changements).</li>
      <li><strong>Affichage graphique</strong> du potentiel et de la position du syst√®me.</li>
      <li><strong>Ajout de deux syst√®mes</strong> √† seuil</li>
    </ul>
    <hr>

    <h2><span class="emoji">üéõÔ∏è</span> Interface utilisateur</h2>
    <ul>
      <li><code>SIGNAL</code> : entr√©e du signal (bruit√© ou non).</li>
      <li><code>NOISE</code> : entr√©e du bruit.</li>
      <li><code>V/OCT</code> : sortie en tension (1V/oct) correspondant √† une note.</li>
      <li><code>GATE</code> : sortie de la fen√™tre de la note.</li>
      <li><code>OUTPUT</code> : Sortie du signal filtr√©</li>
      <li><code>RATE</code> : dur√©e minimale entre deux notes jou√©es.</li>
      <li><code>THRESHOLD</code> : Param√®tre de seuil des filtres √† seuil avec une entr√©e de modulation.</li>
      <li><code>N</code> : Param√®tre de r√©glage du nombre de puits.</li>
      <li><code>Xb</code> : Profondeur des puits.</li>
      <li><code>TAU</code> : R√©activit√© du filtre.</li>
      <li><code>GRAPH DISPLAY</code> : affiche le potentiel bistable/multi-puits et la trajectoire du syst√®me.</li>
      <li><code>SCALE X</code> : Mise en √©chelle sur l'axe horizontal</li>
      <li><code>SCALE Y</code> : Mise en √©chelle sur l'axe vertical</li>
      <li><code>Switch (N, R)</code> : Basculer entre affichage temps r√©el (N) et affichage selon la note jou√©e (R) (fonctionne uniquement pour le filtre 3)</li>
    </ul>
    <div>
        <img src="./images/RS%20module.png" alt="Interface utilisateur du module" title="Interface utilisateur du module">
    </div>

    <h2>Module RS</h2>
    <div class="images-container">
      <p><img src="./images/filtre%201.png" alt="Filtre diode" title="Filtre diode"></p>
      <p><img src="./images/filtre%202.png" alt="Filtre double diode" title="Filtre double diode"></p>
      <p><img src="./images/filtre%203.png" alt="Filtre dynamique √† puits de potentiel" title="Filtre dynamique √† puits de potentiel"></p>
    </div>

    <h2><span class="emoji">üß†</span> Fonctionnement interne</h2>
    <ol>
      <li><strong>Int√©gration d'un signal bruit√©</strong> dans un syst√®me non lin√©aire (√† seuil ou √† potentiel).</li>
      <li><strong>D√©tection de franchissement de seuils</strong> correspondant aux minima du potentiel.</li>
      <li><strong>Contr√¥le de la dur√©e</strong> pour √©viter les transitions trop rapides.</li>
    </ol>
    <hr>

    <h2><span class="emoji">üéµ</span> Notes musicales</h2>
    <p>Chaque puits est mapp√© √† une note :</p>
    <ul>
      <li>Par exemple : puits gauche ‚Üí Do, centre ‚Üí Mi, droite ‚Üí Sol.</li>
      <li>Notes envoy√©es en tension : <code>note = baseNote + d√©calage</code>, convertie en volt (1V/oct).</li>
    </ul>
    <hr>

    <h2><span class="emoji">üí°</span> Id√©es artistiques</h2>
    <ul>
      <li>Utiliser comme <strong>s√©quenceur probabiliste</strong>, contr√¥l√© par le bruit.</li>
      <li>Cr√©er des <strong>textures musicales dynamiques</strong> avec une structure cach√©e.</li>
      <li>Produire des <strong>√©v√©nements rythmiques li√©s √† la dynamique stochastique</strong>.</li>
    </ul>
    <hr>

    <h2>Modules</h2>
    <div class="images-container">
      <p><img src="./images/noise%20module.png" alt="Module de bruit" title="Module de g√©n√©rateur de bruit"></p>
      <p><img src="./images/compressor.png" alt="Module de compression" title="Module de compression d'amplitude"></p>
    </div>

    <h1>Tutoriel VCV Rack</h1>
    <h2>Installation de VCV Rack</h2>
    <h3>Sur Ubuntu</h3>
    <ol>
      <li>
        <strong>Installer les d√©pendances n√©cessaires :</strong>
        <pre><code>sudo apt install unzip git gdb curl cmake libx11-dev libglu1-mesa-dev \
libxrandr-dev libxinerama-dev libxcursor-dev libxi-dev zlib1g-dev \
libasound2-dev libgtk2.0-dev libgtk-3-dev libjack-jackd2-dev jq zstd \
libpulse-dev pkg-config
</code></pre>
      </li>
      <li>
        <strong>Cloner le d√©p√¥t de VCV Rack :</strong>
        <pre><code>git clone https://github.com/VCVRack/Rack.git
cd Rack
</code></pre>
      </li>
      <li>
        <strong>Initialiser les sous-modules :</strong>
        <pre><code>git submodule update --init --recursive
</code></pre>
      </li>
      <li>
        <strong>Compiler VCV Rack :</strong>
        <pre><code>make dep
make
make run  # Lance VCV Rack
</code></pre>
      </li>
    </ol>
    <hr>

    <h2>Installation du SDK de VCV Rack</h2>
    <h3>Option 1 : Cloner depuis GitHub</h3>
    <pre><code>git clone https://github.com/VCVRack/Fundamental.git
cd Fundamental
git submodule update --init --recursive
</code></pre>
    <h3>Option 2 : T√©l√©charger le SDK</h3>
    <ul>
      <li>T√©l√©charger depuis ce lien :<br>
        <a href="https://vcvrack.com/downloads/Rack-SDK-latest-lin-x64.zip">Rack SDK - version Linux x64</a>
      </li>
      <li>D√©compresser le fichier ZIP.</li>
      <li>D√©finir la variable d‚Äôenvironnement <code>RACK_DIR</code> :</li>
      <pre><code>export RACK_DIR=/chemin/vers/le/dossier/dezippe
</code></pre>
    </ul>
    <h3>Compilation</h3>
    <pre><code>make dep
make
</code></pre>
    <hr>

    <h2>D√©veloppement d‚Äôun plugin</h2>
    <h3>D√©finir le chemin du SDK dans <code>.bashrc</code></h3>
    <ol>
      <li>Ouvrir le fichier :
        <pre><code>vim ~/.bashrc
</code></pre>
      </li>
      <li>Ajouter √† la fin du fichier :
        <pre><code>export RACK_DIR=/chemin/vers/le/dossier/du/sdk
</code></pre>
      </li>
      <li>Recharger la configuration :
        <pre><code>source ~/.bashrc
</code></pre>
      </li>
    </ol>
    <hr>

    <h3>Cr√©ation d‚Äôun plugin √† l‚Äôaide du template</h3>
    <p>Utiliser l‚Äôoutil <code>helper.py</code> :</p>
    <pre><code>$RACK_DIR/helper.py createplugin MyPlugin
</code></pre>
    <ul>
      <li>Remplacer <code>MyPlugin</code> par le nom de votre plugin.</li>
      <li>R√©pondre aux questions pos√©es.</li>
    </ul>
    <p>Cette commande cr√©e un dossier <code>MyPlugin</code> avec la structure suivante :</p>
    <pre><code>MyPlugin/
‚îú‚îÄ‚îÄ res/          # Contiendra le fichier SVG (interface graphique)
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ plugin.cpp
‚îÇ   ‚îî‚îÄ‚îÄ plugin.hpp
‚îú‚îÄ‚îÄ Makefile
‚îî‚îÄ‚îÄ plugin.json
</code></pre>
    <h3>Modifications n√©cessaires apr√®s g√©n√©ration :</h3>
    <ul>
      <li>
        <strong>D√©commenter</strong> la ligne suivante dans <code>plugin.cpp</code> :
        <pre><code>p->addModel(modelMyModule);
</code></pre>
      </li>
      <li>
        <strong>D√©commenter</strong> aussi cette ligne dans <code>plugin.hpp</code> :
        <pre><code>extern Model* modelMyModule;
</code></pre>
      </li>
      <li>Remplacer <code>MyModule</code> par le nom de votre Module.</li>
    </ul>
    <hr>

    <h3>Ajouter un fichier SVG</h3>
    <ul>
      <li>Placer le fichier SVG dans le dossier <code>res/</code>.</li>
      <li>V√©rifier dans Inkscape (ou un autre √©diteur) que les √©l√©ments graphiques sont bien nomm√©s avec les bonnes couleurs.</li>
      <li><strong>Param</strong>: red #ff0000</li>
      <li><strong>Input</strong>: green #00ff00</li>
      <li><strong>Output</strong>: blue #0000ff</li>
      <li><strong>Light</strong>: magenta #ff00ff</li>
      <li><strong>Custom widgets</strong>: yellow #ffff00</li>
    </ul>
    <hr>

    <h2>Cr√©ation de module</h2>
    <pre><code>cd MyPlugin
$RACK_DIR/helper.py createmodule MyModule res/MyModule.svg src/MyModule.cpp
</code></pre>
    <p>Cette commande va cr√©er les fichiers cpp automatiquement en fonction des composants trouv√©s dans le svg.</p>

    <h2>Compilation du plugin</h2>
    <p>Dans le dossier du plugin :</p>
    <pre><code>make install
</code></pre>
    <p>Puis lancer VCV Rack (le plugin sera disponible s‚Äôil est dans le bon dossier <code>plugins</code> ou <code>plugins-v2</code>).</p>

    <h1>Les composants graphiques</h1>
    <h3>Knobs (Potentiom√®tres)</h3>
    <table>
      <thead>
        <tr><th>Nom du composant</th><th>Taille (px)</th><th>Description</th></tr>
      </thead>
      <tbody>
        <tr><td><code>RoundHugeBlackKnob</code></td><td>38x38</td><td>Grosse molette noire, utile pour les param√®tres principaux</td></tr>
        <tr><td><code>RoundLargeBlackKnob</code></td><td>32x32</td><td>Molette de taille moyenne</td></tr>
        <tr><td><code>RoundBlackKnob</code></td><td>25x25</td><td>Molette standard</td></tr>
        <tr><td><code>RoundSmallBlackKnob</code></td><td>17x17</td><td>Petite molette, pour param√®tres secondaires</td></tr>
        <tr><td><code>Trimpot</code></td><td>9x9</td><td>Molette minuscule pour ajustements fins</td></tr>
      </tbody>
    </table>
    <ul>
      <li>Base class : <code>SvgKnob</code></li>
      <li>M√©thode de cr√©ation : <code>createParamCentered&lt;...&gt;()</code></li>
    </ul>

    <h3>Boutons (Buttons)</h3>
    <table>
      <thead>
        <tr><th>Nom du composant</th><th>Taille (px)</th><th>Description</th></tr>
      </thead>
      <tbody>
        <tr><td><code>LEDButton</code></td><td>15x15 env.</td><td>Bouton cliquable avec LED int√©gr√©e (toggle ou momentary)</td></tr>
        <tr><td><code>CKD6</code></td><td>9x9</td><td>Petit switch carr√© (toggle)</td></tr>
        <tr><td><code>CKSS</code></td><td>9x12</td><td>Interrupteur √† deux positions</td></tr>
        <tr><td><code>CKSSThree</code></td><td>9x12</td><td>Interrupteur √† trois positions</td></tr>
        <tr><td><code>MomentarySwitch</code></td><td>10x10 env.</td><td>Bouton poussoir temporaire</td></tr>
      </tbody>
    </table>
    <ul>
      <li>Base class : <code>SvgSwitch</code></li>
      <li>M√©thode de cr√©ation : <code>createParamCentered&lt;...&gt;()</code></li>
    </ul>

    <h3>Ports</h3>
    <table>
      <thead>
        <tr><th>Nom du composant</th><th>Taille (px)</th><th>Description</th></tr>
      </thead>
      <tbody>
        <tr><td><code>PJ301MPort</code></td><td>15x15</td><td>Port jack classique pour entr√©e ou sortie (CV, audio, gate)</td></tr>
      </tbody>
    </table>
    <ul>
      <li>Base class : <code>SvgPort</code></li>
      <li>M√©thode de cr√©ation : <code>createInputCentered&lt;...&gt;()</code> ou <code>createOutputCentered&lt;...&gt;()</code></li>
    </ul>

    <h3>LEDs (Lumi√®res)</h3>
    <table>
      <thead>
        <tr><th>Nom</th><th>Taille approx.</th><th>Description</th></tr>
      </thead>
      <tbody>
        <tr><td><code>TinyLight</code></td><td>2x2</td><td>LED minuscule</td></tr>
        <tr><td><code>SmallLight</code></td><td>5x5</td><td>LED standard</td></tr>
        <tr><td><code>MediumLight</code></td><td>7x7</td><td>LED un peu plus grande</td></tr>
        <tr><td><code>LargeLight</code></td><td>9x9</td><td>LED visible √† distance</td></tr>
        <tr><td><code>VeryLargeLight</code></td><td>11x11</td><td>LED tr√®s grande</td></tr>
      </tbody>
    </table>
    <h4>Types de couleurs (template) :</h4>
    <ul>
      <li><code>RedLight</code></li>
      <li><code>GreenLight</code></li>
      <li><code>BlueLight</code></li>
      <li><code>YellowLight</code></li>
      <li><code>WhiteLight</code></li>
      <li><code>OrangeLight</code></li>
      <li><code>PurpleLight</code></li>
      <li><code>CyanLight</code></li>
      <li>Base class : <code>ModuleLightWidget</code></li>
      <li>M√©thode de cr√©ation : <code>createLightCentered&lt;...&gt;()</code></li>
    </ul>

    <h3>Vis / Visuels divers</h3>
    <table>
      <thead>
        <tr><th>Nom du composant</th><th>Taille (px)</th><th>Description</th></tr>
      </thead>
      <tbody>
        <tr><td><code>ScrewSilver</code></td><td>7x7</td><td>Vis d'apparence argent√©e</td></tr>
        <tr><td><code>ScrewBlack</code></td><td>7x7</td><td>Vis noire</td></tr>
      </tbody>
    </table>
    <ul>
      <li>Base class : <code>Widget</code></li>
      <li>M√©thode de cr√©ation : <code>createWidget&lt;...&gt;()</code></li>
    </ul>

    <h2>üì¶ Classes de base (h√©ritage)</h2>
    <table>
      <thead>
        <tr><th>Classe de base</th><th>Description</th></tr>
      </thead>
      <tbody>
        <tr><td><code>SvgKnob</code></td><td>Base pour les knobs</td></tr>
        <tr><td><code>SvgSwitch</code></td><td>Base pour les boutons/interrupteurs</td></tr>
        <tr><td><code>SvgPort</code></td><td>Base pour les ports d'entr√©e/sortie</td></tr>
        <tr><td><code>ModuleLightWidget</code></td><td>Base pour les LEDs</td></tr>
        <tr><td><code>Widget</code></td><td>Base g√©n√©rique pour composants graphiques</td></tr>
      </tbody>
    </table>

    <h2>üõ†Ô∏è Exemple d'utilisation</h2>
    <pre><code class="language-cpp">addParam(createParamCentered<RoundBlackKnob>(
    mm2px(Vec(15.0, 40.0)), module, MyModule::PARAM_ID));

addInput(createInputCentered<PJ301MPort>(
    mm2px(Vec(5.0, 100.0)), module, MyModule::INPUT_ID));

addOutput(createOutputCentered<PJ301MPort>(
    mm2px(Vec(25.0, 100.0)), module, MyModule::OUTPUT_ID));

addChild(createLightCentered<SmallLight<RedLight>>(
    mm2px(Vec(15.0, 70.0)), module, MyModule::LIGHT_ID));
</code></pre>

    <h1>Ressources utiles</h1>
    <ul>
      <li><a href="https://vcvrack.com/manual/">Documentation officielle de VCV Rack</a></li>
      <li><a href="https://github.com/VCVRack/VCV-Prototype">Exemples de plugins</a></li>
    </ul>
  </div>
</body>
</html>